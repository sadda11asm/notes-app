{"version":3,"sources":["../../server/middlewares/shareLink.js"],"names":["require","config","redis","jwt","checkToken","req","res","next","unique_token","params","verify","process","env","JWT_SHARING_SECRET","err","decoded","console","log","json","success","message","module","exports"],"mappings":";;AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,IAAMC,KAAK,GAAGF,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIG,GAAG,GAAGH,OAAO,CAAC,cAAD,CAAjB;;AAEA,SAASI,UAAT,CAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,IAA/B,EAAqC;AACnC;AADmC,MAEzBC,YAFyB,GAERH,GAAG,CAACI,MAFI,CAEzBD,YAFyB;AAIjCL,EAAAA,GAAG,CAACO,MAAJ,CAAWF,YAAX,EAAyBG,OAAO,CAACC,GAAR,CAAYC,kBAArC,EAAyD,UAAUC,GAAV,EAAeC,OAAf,EAAwB;AAC7EC,IAAAA,OAAO,CAACC,GAAR,CAAYT,YAAZ;;AACA,QAAIM,GAAJ,EAAS;AACL,aAAOR,GAAG,CAACY,IAAJ,CAAS;AACZC,QAAAA,OAAO,EAAE,KADG;AAEZC,QAAAA,OAAO,EAAE;AAFG,OAAT,CAAP;AAIH,KALD,MAKO;AACH;AACA;AACAf,MAAAA,GAAG,CAACU,OAAJ,GAAcA,OAAd;AACA,aAAOR,IAAI,EAAX;AACH;AACJ,GAbD;AAcH;;AAAA;AAEDc,MAAM,CAACC,OAAP,GAAiB;AACflB,EAAAA,UAAU,EAAEA;AADG,CAAjB","sourcesContent":["require('dotenv').config();\nconst redis = require('redis')\nlet jwt = require('jsonwebtoken');\n\nfunction checkToken (req, res, next) {\n  // console.log(next)\n    const { unique_token } = req.params;\n\n    jwt.verify(unique_token, process.env.JWT_SHARING_SECRET, function (err, decoded) {\n        console.log(unique_token)\n        if (err) {\n            return res.json({\n                success: false,\n                message: 'Sharing token is not valid'\n            });\n        } else {\n            // console.log(\"Middleware!\")\n            // console.log(decoded)\n            req.decoded = decoded;\n            return next();\n        }\n    });\n};\n\nmodule.exports = {\n  checkToken: checkToken\n}"],"file":"shareLink.js"}